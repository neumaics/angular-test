<html>
<head>
  <meta charset="UTF-8"> 
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular-route.js"></script>
  <script type="text/javascript">

  angular.module('interview', ['ngRoute'])
    .factory('PhotoDataService', ['$http', function($http) {
      var cityData;
      var resolveCityData = $http.get('http://mqlocal.aol.com/photos').success(function(data){
        cityData = data;
      });
      
      var service = {};
      
      service.resolveCityData = resolveCityData;
      service.getCityData = function() { return cityData; };

      return service;
    }])
    .controller('CityCtrl', ['$scope', 'PhotoDataService', 
      function($scope, PhotoDataService) {
        $scope.cities = PhotoDataService.getCityData();
      }]
    )
    .config(['$routeProvider', function($routeProvider) {
      $routeProvider.otherwise({
        templateUrl: 'app/home/home.html',
        controller: 'CityCtrl',
        resolve: {
            'cityData': function(PhotoDataService) { return PhotoDataService.resolveCityData; }
        } 

      });
    }]);

  </script>
</head>
<body>

  <div ng-app="interview">
    <div ng-view></div>    
  </div>
</body>
</html>